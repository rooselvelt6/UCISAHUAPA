<?xml version="1.0" encoding="utf-8"?>

<!-- CADA ID ES UNICO Y SIEMPRE EN MINUSCULA-->
<odoo>
  <!-- Form view -->
  <record id="apache_form_view" model="ir.ui.view">
    <field name="name">apache.apache.form.view</field>
    <field name="model">apache.apache</field>
    <field name="arch" type="xml">
      <form string="Apache Form">

        <header>
          <button string="Calcular" name="calcular" type="object"></button>
          <button string="Valores controlados" name="controlados" type="object"></button>
        </header>

        <sheet>
          
          <group string="Fecha de cálculo"> 
            <field string="Fecha" name="fecha_actual"></field>
          </group>

          <group col="2" string="Variables Fisiológicas">
            <field string="Temperatura" name="temperatura" placeholder="Temperatura" help="Temperatura rectal (Axial +0.5°C)"></field>
            <field name="pam" help="Presión arterial media (mmHg)" placeholder="Presión arterial media (PAM)"></field>
            <field name="fc" help="Frecuencia cardíaca (Respuesta ventricular)"></field>
            <field name="fr" help="Frecuencia respiratoria (No ventilado o ventilado)"></field>
            <field name="ph" help="pH arterial (Preferido)"></field>
            <field name="hco3" help="HCO3 Sérico(Venoso mEq/l)"></field>
            <field name="na" help="Sodio Sérico (mEq/l)"></field>
            <field name="k" help="Potasio Sérico (mEq/l)"></field>
            <field name="creatinina" help="Creatinina sérica (mg/dl)"></field>
            <field name="fallo_renal" help="¿El paciente tiene fallas renales?"></field>
            <field name="hematocrito" help="Hematocrito (%)"></field>
            <field name="leucocitos" help="Leucocitos (Total/mm3 en miles)"></field>
            <field name="fio2" help="Oxigenación FIO2"></field>
            <field name="oxigenacion" help="Valor actual de Oxigenación"></field>
          </group>

          <group col="2" string="Escala de coma de Glasgow">
            <field name="apertura_ocular" help='Valor de apertura ocular. Rango:(1-4)'></field>
            <field name="respuesta_motora" help='Valor de la respuesta motora. Rango:(1-6)'></field>
            <field name="respuesta_verbal" help='Valor de la respuesta verbal. Rango:(1-5)'></field>
          </group>

          <group string="Resultados">
            <field name="aps" help="Sumatoria de todas las variables fisiológicas del paciente"/>
            <field name="apache" help="Estado de gravedad del paciente"/>
            <field name="mortalidad" help="Estimación del porcentaje de mortalidad"/>
          </group>

        </sheet>
      </form>
    </field>
  </record>

   <!-- Tree view -->
   <record id="apache_tree_view" model="ir.ui.view">
    <field name="name">apache.apache.form.view</field>
    <field name="model">apache.apache</field>
    <field name="arch" type="xml">
      <tree limit="30">
            <field name="fecha_actual"></field>
            <field name="temperatura"></field>
            <field name="pam"></field>
            <field name="fc"></field>
            <field name="fr"></field>
            <field name="ph"></field>
            <field name="hco3"></field>
            <field name="na"></field>
            <field name="k"></field>
            <field name="creatinina"></field>
            <field name="hematocrito"></field>
            <field name="leucocitos"></field>
            <field name="oxigenacion"></field>
            <field name="aps"></field>
            <field name="apache"></field>
            <field name="mortalidad"></field>
      </tree>
    </field>
  </record>
  
  <!-- Search views -->
  <record id="views_filter_apache" model="ir.ui.view">
    <field name="name">Filtro APACHE</field>
    <field name="model">apache.apache</field>
    <field name="arch" type="xml">
      <search>
        <field name="aps"></field>
        <field name="apache"></field>
        <field name="mortalidad"></field>
        <filter string="Pacientes con fallas renales" domain="[('fallo_renal','=',True)]"></filter>
        <filter string="Pacientes sin fallas renales" domain="[('fallo_renal','=',False)]"></filter>
      </search>
    </field>
  </record>

  <!-- actions opening views on models -->
  <record id="action_apache" model="ir.actions.act_window">
    <field name="name">Índice de Gravedad APACHE II</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">apache.apache</field>
    <field name="view_mode">tree,form</field>
  </record>

  <!-- Menú -->
  <menuitem id="apache_menu_root" name="Apache II" sequence="1"></menuitem>
  <menuitem id="apache_menu_category" name="APACHE" sequence="1" parent="apache_menu_root"></menuitem>
  <menuitem id="action_apache_menu" name="APACHE" sequence="1" parent="apache_menu_category" action="action_apache"></menuitem>
</odoo>
